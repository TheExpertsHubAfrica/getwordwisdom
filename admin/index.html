<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - GetWordWisdom</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/admin.css">
</head>
<body class="admin-body">
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <h2>GetWordWisdom</h2>
                <p>Admin Dashboard</p>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#posts" class="nav-link active" data-section="posts">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                    </svg>
                    <span>Posts</span>
                </a>
                <a href="#commentaries" class="nav-link" data-section="commentaries">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    <span>Commentaries</span>
                </a>
                <a href="#subscribers" class="nav-link" data-section="subscribers">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                    <span>Subscribers</span>
                </a>
                <a href="help.html" class="nav-link">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    <span>Help Guide</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <button id="logout-btn" class="btn-logout">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <header class="admin-header">
                <h1 id="page-title">Posts Management</h1>
                <div class="admin-user">
                    <span id="admin-email">admin@example.com</span>
                </div>
            </header>

            <!-- Posts Section -->
            <section id="posts-section" class="admin-section active">
                <div class="section-actions">
                    <button id="create-post-btn" class="btn btn-primary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        Create New Post
                    </button>
                </div>

                <div class="posts-table-container">
                    <table class="admin-table" id="posts-table">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Category</th>
                                <th>Author</th>
                                <th>Status</th>
                                <th>Featured</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="posts-table-body">
                            <tr>
                                <td colspan="7" class="loading-row">Loading posts...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Commentaries Section -->
            <section id="commentaries-section" class="admin-section">
                <div class="section-actions">
                    <button id="create-commentary-btn" class="btn btn-primary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        Add New Commentary
                    </button>
                </div>

                <div class="posts-table-container">
                    <table class="admin-table" id="commentaries-table">
                        <thead>
                            <tr>
                                <th>Book</th>
                                <th>Chapter</th>
                                <th>Verse</th>
                                <th>Date</th>
                                <th>Preview</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="commentaries-table-body">
                            <tr>
                                <td colspan="6" class="loading-row">Loading commentaries...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Subscribers Section -->
            <section id="subscribers-section" class="admin-section">
                <div class="section-stats">
                    <div class="stat-card">
                        <h3 id="total-subscribers">0</h3>
                        <p>Total Subscribers</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="active-subscribers">0</h3>
                        <p>Active Subscribers</p>
                    </div>
                </div>

                <div class="subscribers-table-container">
                    <table class="admin-table" id="subscribers-table">
                        <thead>
                            <tr>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Date Subscribed</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="subscribers-table-body">
                            <tr>
                                <td colspan="4" class="loading-row">Loading subscribers...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Post Editor Modal -->
    <div id="post-editor-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="editor-title">Create New Post</h2>
                <button class="modal-close" id="close-editor">&times;</button>
            </div>
            <form id="post-editor-form">
                <input type="hidden" id="post-id" name="postId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="post-title">Title *</label>
                        <input type="text" id="post-title" name="title" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="post-slug">Slug *</label>
                        <input type="text" id="post-slug" name="slug" required>
                        <small>URL-friendly version (auto-generated from title)</small>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-half">
                        <label for="post-category">Category *</label>
                        <select id="post-category" name="category" required>
                            <option value="">Select Category</option>
                            <option value="Faith">Faith</option>
                            <option value="Commentary">Commentary</option>
                            <option value="Christian Living">Christian Living</option>
                            <option value="Teachings">Teachings</option>
                            <option value="Wisdom">Wisdom</option>
                        </select>
                    </div>
                    <div class="form-group col-half">
                        <label for="post-author">Author *</label>
                        <input type="text" id="post-author" name="author" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="post-image">Featured Image</label>
                    <input type="file" id="post-image" name="image" accept="image/*">
                    <small>Upload a featured image (optional)</small>
                    <div id="current-image" style="display: none;">
                        <p>Current image: <span id="current-image-name"></span></p>
                        <img id="current-image-preview" src="" alt="Current featured image" style="max-width: 200px; margin-top: 10px;">
                    </div>
                    <div id="image-upload-progress" class="upload-progress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <span class="progress-text">Uploading...</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="post-content">Content *</label>
                    <textarea id="post-content" name="content" rows="15" required></textarea>
                    <small>Write your post content (supports HTML formatting)</small>
                </div>

                <div class="form-row">
                    <div class="form-group col-half">
                        <label for="post-status">Status *</label>
                        <select id="post-status" name="status" required>
                            <option value="draft">Draft</option>
                            <option value="published">Published</option>
                        </select>
                    </div>
                    <div class="form-group col-half">
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="post-featured" name="isFeatured">
                                <span>Featured Post</span>
                            </label>
                            <small>Display this post on the homepage</small>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancel-editor">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="save-post-btn">
                        <span id="save-btn-text">Save Post</span>
                        <span id="save-btn-loading" class="loading-spinner" style="display: none;"></span>
                    </button>
                </div>

                <div id="editor-error" class="error-message" style="display: none;">
                    <p id="editor-error-text"></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Commentary Editor Modal -->
    <div id="commentary-editor-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="commentary-editor-title">Add New Commentary</h2>
                <button class="modal-close" id="close-commentary-editor">&times;</button>
            </div>
            <form id="commentary-editor-form">
                <input type="hidden" id="commentary-id" name="commentaryId">
                
                <div class="form-row">
                    <div class="form-group col-half">
                        <label for="commentary-book">Bible Book *</label>
                        <select id="commentary-book" name="book" required>
                            <option value="">Select Book</option>
                            <option value="genesis">Genesis</option>
                            <option value="exodus">Exodus</option>
                            <option value="leviticus">Leviticus</option>
                            <option value="numbers">Numbers</option>
                            <option value="deuteronomy">Deuteronomy</option>
                            <option value="joshua">Joshua</option>
                            <option value="judges">Judges</option>
                            <option value="ruth">Ruth</option>
                            <option value="1-samuel">1 Samuel</option>
                            <option value="2-samuel">2 Samuel</option>
                            <option value="1-kings">1 Kings</option>
                            <option value="2-kings">2 Kings</option>
                            <option value="1-chronicles">1 Chronicles</option>
                            <option value="2-chronicles">2 Chronicles</option>
                            <option value="ezra">Ezra</option>
                            <option value="nehemiah">Nehemiah</option>
                            <option value="esther">Esther</option>
                            <option value="job">Job</option>
                            <option value="psalms">Psalms</option>
                            <option value="proverbs">Proverbs</option>
                            <option value="ecclesiastes">Ecclesiastes</option>
                            <option value="song-of-solomon">Song of Solomon</option>
                            <option value="isaiah">Isaiah</option>
                            <option value="jeremiah">Jeremiah</option>
                            <option value="lamentations">Lamentations</option>
                            <option value="ezekiel">Ezekiel</option>
                            <option value="daniel">Daniel</option>
                            <option value="hosea">Hosea</option>
                            <option value="joel">Joel</option>
                            <option value="amos">Amos</option>
                            <option value="obadiah">Obadiah</option>
                            <option value="jonah">Jonah</option>
                            <option value="micah">Micah</option>
                            <option value="nahum">Nahum</option>
                            <option value="habakkuk">Habakkuk</option>
                            <option value="zephaniah">Zephaniah</option>
                            <option value="haggai">Haggai</option>
                            <option value="zechariah">Zechariah</option>
                            <option value="malachi">Malachi</option>
                            <option value="matthew">Matthew</option>
                            <option value="mark">Mark</option>
                            <option value="luke">Luke</option>
                            <option value="john">John</option>
                            <option value="acts">Acts</option>
                            <option value="romans">Romans</option>
                            <option value="1-corinthians">1 Corinthians</option>
                            <option value="2-corinthians">2 Corinthians</option>
                            <option value="galatians">Galatians</option>
                            <option value="ephesians">Ephesians</option>
                            <option value="philippians">Philippians</option>
                            <option value="colossians">Colossians</option>
                            <option value="1-thessalonians">1 Thessalonians</option>
                            <option value="2-thessalonians">2 Thessalonians</option>
                            <option value="1-timothy">1 Timothy</option>
                            <option value="2-timothy">2 Timothy</option>
                            <option value="titus">Titus</option>
                            <option value="philemon">Philemon</option>
                            <option value="hebrews">Hebrews</option>
                            <option value="james">James</option>
                            <option value="1-peter">1 Peter</option>
                            <option value="2-peter">2 Peter</option>
                            <option value="1-john">1 John</option>
                            <option value="2-john">2 John</option>
                            <option value="3-john">3 John</option>
                            <option value="jude">Jude</option>
                            <option value="revelation">Revelation</option>
                        </select>
                    </div>
                    <div class="form-group col-half">
                        <label for="commentary-chapter">Chapter</label>
                        <input type="text" id="commentary-chapter" name="chapter" placeholder="e.g., 1, 20, or leave blank for intro">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-half">
                        <label for="commentary-verse">Verse(s)</label>
                        <input type="text" id="commentary-verse" name="verse" placeholder="e.g., 6:26-27, 8:19, or 20">
                    </div>
                    <div class="form-group col-half">
                        <label for="commentary-date">Date Written *</label>
                        <input type="date" id="commentary-date" name="dateWritten" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="commentary-content">Commentary Content *</label>
                    <textarea id="commentary-content" name="content" rows="15" required placeholder="Enter your commentary text here. You can include scripture references, observations, and reflections..."></textarea>
                    <small>Write your commentary (supports line breaks and basic formatting)</small>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancel-commentary-editor">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="save-commentary-btn">Save Commentary</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Confirm Delete</h2>
                <button class="modal-close" id="close-delete">&times;</button>
            </div>
            <div class="modal-body">
                <p id="delete-message">Are you sure you want to delete this item?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancel-delete">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirm-delete">
                    <span id="delete-btn-text">Delete</span>
                    <span id="delete-btn-loading" class="loading-spinner" style="display: none;"></span>
                </button>
            </div>
        </div>
    </div>

    <script src="/js/config.js"></script>
    <script src="/js/api.js"></script>
    <script src="/js/utils.js"></script>
    <script src="/js/admin.js"></script>
</body>
</html>
